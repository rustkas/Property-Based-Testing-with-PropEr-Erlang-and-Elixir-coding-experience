decode_row_emulate_01_test() ->
    DecodeRow_2 =
        fun Decode_row(String, Acc) ->
                case decode_field(String) of
                    {go_on, Field, Rest} ->
                        decode_row(Rest, Acc ++ [Field]);
                    {done, Field, Rest} ->
                        Result = Acc ++ [Field],
                        {Result, Rest}
                end
        end,
    DecodeRow_1 =
        fun Decode_row(String) ->
                DecodeRow_2(String, [])
        end,

    String = "aaa,bbb",
    Result = DecodeRow_1(String),
    ?assertEqual({["aaa", "bbb"], []}, Result).

decode_row_01_test() ->
    String = "aaa,bbb",
    Result = decode_row(String),
    ?assertEqual({["aaa", "bbb"], []}, Result).
