decode_row_emulate_01_test() ->
    Expected = {["aaa", "bbb"], []},
    String = "aaa,bbb",
    DecodeRow_2 =
        fun Decode_row(String, Acc) ->
                case decode_field(String) of
                    {go_on, Field, Rest} ->
                        Decode_row(Rest, Acc ++ [Field]);
                    {done, Field, Rest} ->
                        Result = Acc ++ [Field],
                        {Result, Rest}
                end
        end,
    DecodeRow_1 =
        fun Decode_row(String) ->
                DecodeRow_2(String, [])
        end,
    Result = DecodeRow_1(String),
    ?assertEqual(Expected, Result).

decode_row_01_test() ->
    Expected = {["abc", "dfg"], []},
    String = "abc,dfg",
    Result = decode_row(String),
    ?assertEqual(Expected, Result).

decode_row_02_test() ->
    Expected = {["\"nik\"", "\"plik\""], []},
    String = "\"nik\",\"plik\"",
    Result = decode_row(String),
    ?assertEqual(Expected, Result).
